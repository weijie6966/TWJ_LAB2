<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TWJ_LAB2.Views.MainPage"
             xmlns:models="clr-namespace:TWJ_LAB2.Models"
             xmlns:viewmodels="clr-namespace:TWJ_LAB2.ViewModels">
    <Grid RowDefinitions="80, Auto, *" RowSpacing="0">

        <Grid Grid.Row="0" BackgroundColor="#6A1B9A" RowDefinitions="30, *" RowSpacing="0">
            <Label Grid.Row="0" 
                    TextColor="White" 
                    FontSize="12" 
                    Margin="15, 5, 0, 0"
                    HorizontalOptions="Start"/>
            <Label Grid.Row="1" 
                    Text="{Binding PetDetails.StudentInfo}" 
                    TextColor="White" 
                    FontSize="16" 
                    FontAttributes="Bold"
                    HorizontalOptions="Center" 
                    VerticalOptions="Start"/>
        </Grid>

        <Image Grid.Row="1" 
               Source="{Binding PetDetails.PetImageSource}" 
               Aspect="AspectFill" 
               HeightRequest="300" 
               Margin="0"/>

        <Border Grid.Row="2"
                BackgroundColor="White"
                StrokeShape="RoundRectangle 30,30,0,0"  
                Margin="0, -30, 0, 0" 
                Padding="20, 0, 20, 20"
                StrokeThickness="0">

            <Grid RowDefinitions="Auto, 10, Auto, Auto, 60" RowSpacing="0">

                <Border Grid.Row="0"
                        BackgroundColor="#FFFDE0" 
                        StrokeShape="RoundRectangle 10" 
                        Padding="15, 10" 
                        Margin="-20, 0, -20, 0"
                        StrokeThickness="0">

                    <Grid RowDefinitions="Auto, Auto" RowSpacing="5">

                        <Grid Grid.Row="0" ColumnDefinitions="*, Auto">
                            <StackLayout Grid.Column="0">
                                <Label Text="{Binding PetDetails.PetName}" 
                                       TextColor="#000000"
                                       FontSize="24" 
                                       FontAttributes="Bold"/>
                                <Label Text="{Binding PetDetails.PetBreed}" 
                                       TextColor="#FFC107" 
                                       FontAttributes="Bold" 
                                       FontSize="16" />
                            </StackLayout>

                            <StackLayout Grid.Column="1" Orientation="Horizontal" Spacing="5" HorizontalOptions="End" VerticalOptions="Start">
                                <Label Text="{Binding PetDetails.PetAge}" 
                                       TextColor="Gray" 
                                       FontSize="14"/>
                                <Label Text="{Binding PetDetails.PetGender}" 
                                       FontSize="24" 
                                       TextColor="#FFC107"/>
                            </StackLayout>
                        </Grid>

                        <Label Grid.Row="1" 
                               Text="{Binding PetDetails.PetAddress}" 
                               TextColor="Gray" 
                               FontSize="12"/>
                    </Grid>
                </Border>

                <Grid Grid.Row="2" ColumnDefinitions="40, *, Auto" VerticalOptions="Center" Margin="0, 10, 0, 0">
                    <Image Source="{Binding PetDetails.OwnerImageSource}" 
                           HeightRequest="40" 
                           WidthRequest="40" 
                           Aspect="AspectFill">
                        <Image.Clip>
                            <EllipseGeometry RadiusX="20" RadiusY="20" Center="20, 20" />
                        </Image.Clip>
                    </Image>
                    <StackLayout Grid.Column="1" Margin="10, 0, 0, 0">
                        <Label Text="{Binding PetDetails.OwnerName}" 
                               TextColor="Gray" 
                               FontSize="14" 
                               FontAttributes="Bold"/>
                        <Label Text="{Binding PetDetails.OwnerRole}" 
                               TextColor="Gray" 
                               FontSize="12"/>
                    </StackLayout>
                    <Label Grid.Column="2" Text="{Binding PetDetails.AdoptionDate}" 
                           TextColor="Gray" 
                           FontSize="12" 
                           VerticalOptions="Center"/>
                </Grid>

                <Label Grid.Row="3" 
                       Text="{Binding PetDetails.PetDescription}" 
                       FontSize="14" 
                       LineHeight="1.2"
                       TextColor="Gray"
                       Margin="0, 10, 0, 10"/>

                <Grid Grid.Row="4" ColumnDefinitions="60, *" ColumnSpacing="15" Margin="0, 5, 0, 0" VerticalOptions="Start">
                    <Button Grid.Column="0" 
                            Text="♥" 
                            FontSize="20"
                            BackgroundColor="#EDEDED" 
                            TextColor="#FFC107" 
                            CornerRadius="25"
                            HeightRequest="50" WidthRequest="50"
                            Command="{Binding FavoriteCommand}"/>
                    <Button Grid.Column="1" 
                            Text="{Binding AdoptionButtonText}"
                            FontSize="18" 
                            BackgroundColor="#FFC107" 
                            TextColor="White" 
                            CornerRadius="25"
                            HeightRequest="50"
                            Command="{Binding AdoptCommand}"/>
                </Grid>

            </Grid>
        </Border>
    </Grid>
</ContentPage>